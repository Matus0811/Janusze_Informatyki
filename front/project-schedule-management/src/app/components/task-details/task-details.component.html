<div class="container-fluid">
  <div class="row">
    <div class="col-md-8">
      <div class="card-title">
        <h3>{{ this.currentTask.name }}</h3>
      </div>
      <div class="row mt-3">
        <div class="col">
          <p class="m-0"><b>ID:</b> {{ this.currentTask.taskCode }}</p>
          <p class="m-0 mt-3"><b>Opis:</b> {{ this.currentTask.description }}</p>
          <p class="m-0"><b>Status:</b> {{ this.currentTask.status }}</p>
          <p class="m-0"><b>Priorytet:</b> {{ this.currentTask.priority }}</p>
        </div>
      </div>
      <div class="row mt-3">
        <div class="col-md-6">
          <p>Data rozpoczęcia: {{ this.currentTask.startDate | date:"yyyy-MM-dd HH:mm:ss" }}</p>
        </div>
        <div class="col-md-6">
          <p>Data zakończenia:
            <span
              *ngIf="currentTask.finishDate; else dateUndefined">{{ this.currentTask.finishDate | date:"yyyy-MM-dd HH:mm:ss" }}</span>
            <ng-template #dateUndefined>
              <span>Nie określono daty</span>
            </ng-template>
          </p>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="row">
        <div class="col-md-10">
          <div class="card-title">
            <h3>Użytkownicy</h3>
          </div>
        </div>
        <div *ngIf="currentTask.status != 'FINISHED'" class="col">
          <a [matMenuTriggerFor]="settings" class="settings-btn">
            <i class="material-icons">more_vert</i>
          </a>
          <mat-menu #settings="matMenu">
            <a mat-menu-item (click)="addUsers(currentTask)">Dodaj użytkowników</a>
          </mat-menu>
        </div>
      </div>
      <div class="container-fluid overflow-auto">
        <div *ngFor="let user of this.taskUsers" class="row p-2">
          <div class="row">
            <div class="col-md-1 p-0 text-center">
              <i class="bi-person-fill"></i>
            </div>
            <div class="col-md-3">
              <p>{{ user.username }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row mt-5 justify-content-md-center">
    <div class="col-md-10 justify-content-md-center">
        <app-comment-list [taskCode]="currentTask.taskCode"></app-comment-list>
    </div>
  </div>
</div>
